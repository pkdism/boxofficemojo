library("dplyr")
library("scatterD3")
library("ggmap")
library("mapproj")
setwd("C:/Users/Pawan.Dwivedi/Desktop/Research Paper/boxofficemojo/src/r")
boxofficemojo <- read.csv("../../data/europe_2016.tsv",header = TRUE, quote="", sep = "\t")
boxofficemojo$gross <- as.character(boxofficemojo$gross)
boxofficemojo$gross <- as.character(sub('\\$','',boxofficemojo$gross))
boxofficemojo$gross <- as.character(sub('\"','',boxofficemojo$gross))
boxofficemojo$gross <- as.character(sub('"','',boxofficemojo$gross))
boxofficemojo$gross <- as.character(sub(',','',boxofficemojo$gross))
boxofficemojo$gross <- as.character(sub(',','',boxofficemojo$gross))
boxofficemojo$gross <- as.numeric(boxofficemojo$gross)
boxofficemojo$country <- sub('"','',boxofficemojo$country)
boxofficemojo$country <- sub('"','',boxofficemojo$country)
boxofficemojo$title <- sub('"','',boxofficemojo$title)
boxofficemojo$title <- sub('"','',boxofficemojo$title)
total.gross.country <- boxofficemojo %>% group_by(country) %>% summarise(gross.country = sum(gross))
total.gross.title <- boxofficemojo %>% group_by(title) %>% summarise(gross.title = sum(gross))
data <- inner_join(boxofficemojo, total.gross.title, by = "title")
data <- inner_join(data, total.gross.country, by = "country")
data <- data[c("title","country", "gross", "gross.country")]
data$gross.score <-  with(data, data$gross/data$gross.country)
data <- data %>% filter(gross.score > 0.001)
movie.countrycount <- data %>% group_by(title) %>%
summarise(count.country = n())
data <- inner_join(data,movie.countrycount, by = "title")
data <- data %>% filter(count.country > 4)
movie.country.score <- data[c("title","country","gross.score")]
movie.stats <- movie.country.score %>%
group_by(title) %>%
summarise(score.mean = mean(gross.score), score.sd = sd(gross.score))
View(movie.stats)
View(movie.country.score)
View(data)
View(movie.country.score)
source("../../r/src/main.r")
source("../../src/r/main.r")
source("../../src/r/main.r")
metadata <- read.csv("../../data/movie_metadata.csv")
View(metadata)
metadata$movie_title <- as.character(sub('Â','',metadata$movie_title))
metadata$movie_title <- as.character(sub('Â','',metadata$movie_title))
metadata <- inner_join(metadata, movie.country.score, by.x = "movie_title", by.y = "title")
source("../../src/r/main.r")
metadata <- read.csv("../../data/movie_metadata.csv")
metadata$movie_title <- as.character(sub('Â','',metadata$movie_title))
metadata$movie_title <- as.character(sub('Â','',metadata$movie_title))
metadata <- inner_join(metadata, movie.country.score$title, by.x = "movie_title", by.y = "title")
str(metadata$movie_title)
str(movie.country.score)
metadata <- inner_join(metadata, movie.country.score["title"], by.x = "movie_title", by.y = "title")
metadata <- inner_join(metadata, movie.country.score[c("title")], by.x = "movie_title", by.y = "title")
View(movie.country.score)
names(movie.country.score) <- c("movie_title", "country", "score")
metadata <- right_join(metadata, movie.country.score, by = "movie_title")
View(metadata)
source("../../src/r/main.r")
metadata <- read.csv("../../data/movie_metadata.csv")
metadata$movie_title <- as.character(sub('Â','',metadata$movie_title))
metadata$movie_title <- as.character(sub('Â','',metadata$movie_title))
names(movie.country.score) <- c("movie_title", "country", "score")
metadata <- inner_join(metadata, movie.country.score, by = "movie_title")
source("../../src/r/main.r")
metadata <- read.csv("../../data/movie_metadata.csv")
metadata$movie_title <- as.character(sub('Â','',metadata$movie_title))
metadata$movie_title <- as.character(sub('Â','',metadata$movie_title))
View(movie.stats)
metadata <- read.table("../../data/movie_genre.tsv", quote = "", sep = "\t", header = TRUE)
metadata <- read.table("../../data/movie_genre.tsv", quote = "", sep = "\t", header = FALSE)
write.csv(movie.stats$title, file = "../../data/movie.metadata.csv")
genre <- read.table("../../data/movie_genre.tsv", sep = '\t', header = TRUE)
genre <- read.table("../../data/movie_genre.tsv", sep = '\t', header = TRUE, quote = "")
genre <- read.table("../../data/movie_genre.tsv", sep = '\t', header = FALSE, quote = "")
genre <- read.table("../../data/movie_genre.tsv", sep = '\t', header = FALSE, quote = "")
genre <- read.table("../../data/movie_genre.tsv", sep = '\t', header = FALSE, quote = "")
genre <- read.csv("../../data/movie_genre.tsv", sep = '\t', header = FALSE, quote = "")
genre <- right_join(genre, movie.country.score, by = "title")
names(genre) <- c("title", "genre")
View(genre)
genre <- right_join(genre, movie.country.score, by = "title")
View(genre)
source("../../src/r/main.r")
genre <- read.csv("../../data/movie_genre.tsv", sep = '\t', header = FALSE, quote = "")
names(genre) <- c("title", "genre")
genre <- right_join(genre, movie.country.score, by = "title")
View(genre)
source("../../src/r/main.r")
source("../../src/r/main.r")
genre <- read.csv("../../data/movie_genre.tsv", sep = '\t', header = FALSE, quote = "")
names(genre) <- c("title", "genre")
genre <- right_join(genre, movie.country.score, by = "title")
View(genre)
write.csv(genre, file = "../../data/genre.csv")
View(movie.country.score)
source("../../src/r/main.r")
genre <- read.csv("../../data/movie_genre.tsv", sep = '\t', header = FALSE, quote = "")
names(genre) <- c("title", "genre")
View(movie.stats)
genre <- right_join(genre, movie.stats, by = "title")
View(genre)
write.csv(genre, file = "../../data/genre.csv")
View(movie.country.score)
source("../../src/r/main.r")
genre <- read.csv("../../data/movie_genre.tsv", sep = '\t', header = FALSE, quote = "")
View(movie.stats)
genre <- merge(genre, movie.country.score, by = "title", all.y = TRUE)
str(genre)
names(genre) <- c("title", "genre")
str(genre)
str(movie.country.score)
genre$title <- as.character(genre$title)
genre$genre <- as.character(genre$genre)
genre <- merge(genre, movie.country.score, by = "title", all.y = TRUE)
source("../../src/r/main.r")
genre <- read.csv("../../data/movie_genre.tsv", sep = '\t', header = FALSE, quote = "")
names(genre) <- c("title", "genre")
genre$title <- as.character(genre$title)
genre$genre <- as.character(genre$genre)
genre <- merge(genre, movie.stats, by = "title", all.y = TRUE)
View(genre)
write.csv(genre, file = "../../data/genre.csv")
source("../../src/r/main.r")
source("../../src/r/main.r")
genre <- read.csv("../../data/movie_genre.tsv", sep = '\t', header = FALSE, quote = "")
names(genre) <- c("title", "genre")
genre$title <- as.character(genre$title)
genre$genre <- as.character(genre$genre)
genre <- merge(genre, movie.stats, by = "title", all.y = TRUE)
write.csv(genre, file = "../../data/genre.csv")
source("../../src/r/main.r")
genre <- read.csv("../../data/movie_genre.tsv", sep = '\t', header = FALSE, quote = "")
genre <- read.csv("../../data/genre.tsv", sep = '\t', header = FALSE, quote = "")
genre <- read.csv("../../data/genre.tsv", sep = '\t', header = FALSE, quote = "")
View(genre)
genre <- read.csv("../../data/genre.tsv", sep = '\t', header = TRUE, quote = "")
source("../../src/r/main.r")
movie.country.score.genre <- read.csv("../../data/genre.tsv", sep = '\t', header = TRUE, quote = "")
source("../../src/r/main.r")
genre <- read.csv("../../data/genre.tsv", sep = '\t', header = TRUE, quote = "")
movie.country.score.genre <- merge(movie.country.score, genre, by = "title", all.x = TRUE)
View(movie.country.score.genre)
View(movie.country.score)
source("../../src/r/main.r")
genre <- read.csv("../../data/genre.tsv", sep = '\t', header = TRUE, quote = "")
movie.country.score.genre <- merge(movie.country.score, genre, by = "title", all.x = TRUE)
View(movie.country.score.genre)
View(data)
View(total.gross.title)
movie.country.score.genre <- left_join(movie.country.score.genre, total.gross.title, by = "title")
movie.country.score.genre <- left_join(movie.country.score.genre, total.gross.country, by = "title")
View(total.gross.country)
movie.country.score.genre <- left_join(movie.country.score.genre, total.gross.country, by = "country")
View(movie.country.score.genre)
write.table(movie.country.score.genre, file = "../../output/data/main_data.tsv")
